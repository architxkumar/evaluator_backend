, sj) where feprecond(s;) is a precondition of sj and is produced by s;, fe add(sj). A valid plan is an assignment of ground actions Aj A to the step names sje S such that, 1. Every goal in the partial plan has a supporting action. That is, if fis a precondition (open goal) of s; then there exists a causal link of the form CausalLink(s;, f, s)). 2. Every causal link is true. If a plan contains CausalLink(s;, f, sj) then, (a) feadd(s;). (b)s s;, that is s;, happens before s;. (c) for every s;, s; 5; if f del(s,) then either s,, j OF Sj, S,. That is, no other action clobbers the causal link. 3. The ordering constraints are consistent. If s;, sj and sj, Sk then s;, S, and it is never the case that s,, Sk. For the Sussman s anomaly, we expect to find the following causal links to start with, CausalLink(Stack(A, B), On(A, B), A) and CausalLink(Stack(B, C), On(B, C), A.) Each of the two actions Stack(A, B) and Stack(B, C) will have preconditions that will generate open goals that will need causal links of their own, which we expect to be found during the planning process. The following is an encoding of the planning problem as a SAT problem. The clauses of the SAT are defined as, 1. SHA, Vs A4QV...VS A4,) for all se S, and 4e-4 2. -(s AAS B) for all se S, 4, Bed andA B 3. -Adds(do ) e (F S) 4. Needs(4,., ) eG 5. Adds(s, ) (5 Ayvs Ayv...vs 4,) where seS, AeA, and Oe add(4)) 6. Dels(s, ) (s Ayvs Anv...vs A,) where se S, AeA, and Oe del(4,) 7. Needs(s, ) (s Ayvs Apv...vs A,) where seS, AeA, and Oe precond(A;) 8. Needs(s, ) (CausalLink(p,, , s)v...v CausalLink(p,, , s)) where pe AU Ao , se AULA and Oe F . CausalLink(p, , s) Adds(p, ) where pe dU Ap . se AU A,, and Oe F . (CausalLink(p, , s)aDels(?; )) (r p v s r) where pe AU do , SEA A , 7 -A p, 5 and De F ow IL. Agxs sed 12. s A, sed 13. -(s s) sed 14. (p r a r s) D (p s) PE AV Ap , red, se AULA The clauses in set 1 are a kind of closure axioms which say that the only actions are the one mentioned in the set A. The second se