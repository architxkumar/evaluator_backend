5 7
B 9 3 5 1 B 9 6 7 3 4 5 8 2 1
C 1 8 6 4 C 2 5 1 8 7 6 4 9 3
D 8 1 2 9 D 5 4 8 1 3 2 9 7 6
E 7 8 E 7 2 9 5 6 4 1 3 8
F 6 7 8 2 F 1 3 6 7 9 8 2 4 5
G 2 6 9 5 G 3 7 2 6 8 9 5 1 4
H 8 2 3 9 H 8 1 4 2 5 3 7 6 9
I 5 1 3 I 6 9 5 4 1 7 3 8 2
(a) (b)
Figure6.4 (a)ASudokupuzzleand(b)itssolution.
Alldiff constraints: oneforeachrow,column, andboxof9squares.
Alldiff(A1,A2,A3,A4,A5,A6,A7,A8,A9)
Alldiff(B1,B2,B3,B4,B5,B6,B7,B8,B9) Alldiff(A1,B1,C1,D1,E1,F1,G1,H1,I1)
Alldiff(A2,B2,C2,D2,E2,F2,G2,H2,I2) Alldiff(A1,A2,A3,B1,B2,B3,C1,C2,C3)
Alldiff(A4,A5,A6,B4,B5,B6,C4,C5,C6) Letusseehowfararcconsistencycantakeus. Assumethatthe Alldiff constraintshavebeen
expandedintobinaryconstraints(suchas A1 (cid:7) A2)sothatwecanapplythe AC-3algorithm
directly. Consider variable E6 from Figure 6.4(a) the empty square between the 2 and the
8inthemiddlebox. Fromtheconstraintsinthebox,wecanremovenotonly2and8butalso
1 and 7 from E6 s domain. From the constraints in its column, we can eliminate 5, 6, 2, 8,
9,and3. Thatleaves E6 withadomainof 4 ;inotherwords, weknowtheanswerfor E6.
Now consider variable I6 the square in the bottom middle box surrounded by 1, 3, and 3.
Applyingarcconsistencyinitscolumn,weeliminate5,6,2,4(sincewenowknow E6 must
be 4), 8, 9, and 3. We eliminate 1 by arc consistency with I5, and we are left with only the
value 7 inthe domain of I6. Now there are 8known values in column 6, so arc consistency
caninferthat A6 mustbe1. Inference continues along theselines, andeventually, AC-3can
solve the entire puzzle all the variables have their domains reduced to a single value, as
shownin Figure6.4(b).
Of course, Sudoku would soon lose its appeal if every puzzle could be solved by a
214 Chapter 6. Constraint Satisfaction Problems
mechanicalapplicationof AC-3,andindeed AC-3worksonlyfortheeasiest Sudokupuzzles.
Slightly harder ones can be solved by PC-2, but at a greater computational cost: there are
255,960differentpathconstraintstoconsiderina Sudokupuzzle. Tosolvethehardestpuzzles
andto